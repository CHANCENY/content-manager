<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }}</title>
    <meta name="description" content="{{ page_description }}">
    <meta name="robots" content="noindex, nofollow">
    <meta name="keywords" content="{{ page_keywords }}">
    <style>
        {{ assets.getAssetsFile('ckeditor5.css') }}
    </style>
    {#  TODO: settings for toastify  #}
    <style>
        {{ assets.getAssetsFile('admin.css') }}
    </style>
</head>
<body>

<!-- Top Black Admin Bar -->
<div class="admin-bar">
    <div>
        {% if request.user is not null and request.user.isIsAdmin %}
            <a href="#"><i class="fa fa-bars"></i> Manage</a>
            <a href="#"><i class="fa fa-star"></i> Shortcuts</a>
        {% endif %}

        {% if request.user %}
        <a href="/user/{{ request.user.getUser.uid }}"><i class="fa fa-user"></i> {{  request.user.getUser.name  }}</a>
        {% endif %}
    </div>
    <input type="text" placeholder="Admin Toolbar quick search">
    <div>
        {% if request.user is not null %}
            <a href="#"><i class="fa fa-bell"></i> Announcements</a>
            {% if request.user.isIsAdmin %}
                <a href="#"><i class="fa fa-pencil"></i> Edit</a>
            {% endif %}
        {% endif %}
    </div>
</div>

{% if request.user is not null and request.user.isIsAdmin %}
    <!-- Main Navigation Menu -->
    <div class="main-menu">
        <a href="/admin/content"><i class="fa fa-file"></i> Content</a>
        <a href="/admin/structure"><i class="fa fa-sitemap"></i> Structure</a>
{#        <a href="#"><i class="fa fa-paint-brush"></i> Appearance</a>#}
{#        <a href="#"><i class="fa fa-wrench"></i> Extend</a>#}
        <a href="/admin/config"><i class="fa fa-cogs"></i> Configuration</a>
        <a href="/admin/people"><i class="fa fa-users"></i> People</a>
        <a href="/admin/reports"><i class="fa fa-chart-bar"></i> Reports</a>
        <a href="/user/logout"><i class="fa fa-sign-out"></i> Logout</a>
    </div>
{% elseif request.user is not null and request.user.isIsManager %}

    <div class="main-menu">
        <a href="/admin/content"><i class="fa fa-file"></i> Content</a>
        <a href="/admin/people"><i class="fa fa-users"></i> People</a>
        <a href="/user/logout"><i class="fa fa-sign-out"></i> Logout</a>
    </div>

{% elseif request.user is not null and request.user.isIsAuthenticated %}

    <div class="main-menu">
        <a href="#"><i class="fa fa-home"></i> Home</a>
        <a href="/admin/people"><i class="fa fa-info"></i> About</a>
        <a href="#"><i class="fa fa-contact-card"></i> Contact</a>
        <a href="/user/logout"><i class="fa fa-sign-out"></i> Logout</a>
    </div>

{% else %}

    <div class="main-menu justify-content-end">
        <a href="/user/register"><i class="fa fa-user"></i> Register</a>
        <a href="/user/login"><i class="fa fa-sign-in"></i> Login</a>
    </div>

{% endif %}

<div class="main-content mt-lg-5">
    {% block body %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{# TODO: add setting to enable message. #}
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.min.js" integrity="sha512-79j1YQOJuI8mLseq9icSQKT6bLlLtWknKwj1OpJZMdPt2pFBry3vQTt+NZuJw7NSd1pHhZlu0s12Ngqfa371EA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/system/assets/file?name=toast-messager.js"></script>
<script src="/system/assets/file?name=tabs.js"></script>
<script type="importmap">
    {
        "imports": {
            "ckeditor5": "/system/assets/file?name=ckeditor5.js",
            "ckeditor5/": "./ckeditor5/"
        }
    }
</script>
<script type="module">
    import {
        ClassicEditor,
        Essentials,
        Paragraph,
        Bold,
        Italic,
        Font,
        CodeBlock
    } from 'ckeditor5';

    if (document.querySelectorAll('textarea')) {
        const textarea = document.querySelectorAll('textarea');
        Array.from(textarea).forEach((element) => {

            ClassicEditor
                .create( element, {
                    licenseKey: 'GPL',
                    plugins: [ Essentials, Paragraph, Bold, Italic, Font,CodeBlock ],
                    toolbar: [
                        'undo', 'redo', '|', 'bold', 'italic', '|',
                        'fontSize', 'fontFamily', 'fontColor', 'fontBackgroundColor',
                        'codeBlock'
                    ],
                    codeBlock: {
                        languages: [
                            { language: 'plaintext', label: 'Plain text' }, // The default language.
                            { language: 'c', label: 'C' },
                            { language: 'cs', label: 'C#' },
                            { language: 'cpp', label: 'C++' },
                            { language: 'css', label: 'CSS' },
                            { language: 'diff', label: 'Diff' },
                            { language: 'html', label: 'HTML' },
                            { language: 'java', label: 'Java' },
                            { language: 'javascript', label: 'JavaScript' },
                            { language: 'php', label: 'PHP' },
                            { language: 'python', label: 'Python' },
                            { language: 'ruby', label: 'Ruby' },
                            { language: 'typescript', label: 'TypeScript' },
                            { language: 'xml', label: 'XML' }
                        ]
                    }
                })
                .then( editor => {
                    window.editor = editor;
                } )
                .catch( error => {
                    console.error( error );
                });
        })
    }
</script>
</body>
</html>
